  Determining projects to restore...
  All projects are up-to-date for restore.
  ShahdCooperative.NotificationService.Domain -> C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.Domain\bin\Debug\net8.0\ShahdCooperative.NotificationService.Domain.dll
  ShahdCooperative.NotificationService.Application -> C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.Application\bin\Debug\net8.0\ShahdCooperative.NotificationService.Application.dll
  ShahdCooperative.NotificationService.Infrastructure -> C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.Infrastructure\bin\Debug\net8.0\ShahdCooperative.NotificationService.Infrastructure.dll
  ShahdCooperative.NotificationService.API -> C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.API\bin\Debug\net8.0\ShahdCooperative.NotificationService.API.dll
  ShahdCooperative.NotificationService.IntegrationTests -> C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\bin\Debug\net9.0\ShahdCooperative.NotificationService.IntegrationTests.dll
Test run for C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\bin\Debug\net9.0\ShahdCooperative.NotificationService.IntegrationTests.dll (.NETCoreApp,Version=v9.0)
VSTest version 17.14.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:02.93]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithPagination_ReturnsPagedResults [FAIL]
[xUnit.net 00:00:02.99]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithExistingNotifications_ReturnsNotifications [FAIL]
[xUnit.net 00:00:03.05]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAsRead_WithExistingNotification_ReturnsNoContent [FAIL]
[xUnit.net 00:00:03.11]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAllAsRead_WithExistingNotifications_ReturnsNoContent [FAIL]
[xUnit.net 00:00:03.23]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_ReturnsOnlyRecipientHistory [FAIL]
[xUnit.net 00:00:03.27]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_WithExistingHistory_ReturnsHistory [FAIL]
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithPagination_ReturnsPagedResults [623 ms]
  Error Message:
   Expected notifications to contain 10 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithPagination_ReturnsPagedResults() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\InAppNotificationsControllerIntegrationTests.cs:line 105
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithExistingNotifications_ReturnsNotifications [47 ms]
  Error Message:
   Expected notifications to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.GetUserNotifications_WithExistingNotifications_ReturnsNotifications() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\InAppNotificationsControllerIntegrationTests.cs:line 85
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAsRead_WithExistingNotification_ReturnsNoContent [55 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.NoContent {value: 204}, but found HttpStatusCode.NotFound {value: 404}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAsRead_WithExistingNotification_ReturnsNoContent() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\InAppNotificationsControllerIntegrationTests.cs:line 155
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAllAsRead_WithExistingNotifications_ReturnsNoContent [45 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.NoContent {value: 204}, but found HttpStatusCode.NotFound {value: 404}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.InAppNotificationsControllerIntegrationTests.MarkAllAsRead_WithExistingNotifications_ReturnsNoContent() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\InAppNotificationsControllerIntegrationTests.cs:line 183
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_ReturnsOnlyRecipientHistory [68 ms]
  Error Message:
   Expected history to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_ReturnsOnlyRecipientHistory() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\NotificationHistoryControllerIntegrationTests.cs:line 99
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_WithExistingHistory_ReturnsHistory [27 ms]
  Error Message:
   Expected history to contain 3 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.NotificationHistoryControllerIntegrationTests.GetNotificationHistory_WithExistingHistory_ReturnsHistory() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\NotificationHistoryControllerIntegrationTests.cs:line 78
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.62]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.CreateTemplate_WithValidData_ReturnsCreated [FAIL]
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.CreateTemplate_WithValidData_ReturnsCreated [24 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.Created {value: 201}, but found HttpStatusCode.InternalServerError {value: 500}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.CreateTemplate_WithValidData_ReturnsCreated() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\TemplatesControllerIntegrationTests.cs:line 51
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.77]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.GetAllTemplates_ReturnsEmptyList_WhenNoTemplates [FAIL]
[xUnit.net 00:00:03.87]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.DeleteTemplate_WithExistingKey_ReturnsNoContent [FAIL]
[xUnit.net 00:00:04.01]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.GetUserPreferences_WithNonExistingUser_ReturnsNotFound [FAIL]
[xUnit.net 00:00:04.02]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.UpdateUserPreferences_WithNonExistingUser_ReturnsNotFound [FAIL]
[xUnit.net 00:00:04.04]     ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.CreateUserPreferences_WithValidData_ReturnsCreated [FAIL]
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.GetAllTemplates_ReturnsEmptyList_WhenNoTemplates [53 ms]
  Error Message:
   Expected templates to be empty, but found at least one item {
    ShahdCooperative.NotificationService.Domain.Entities.NotificationTemplate
    {
        Body = "Test Body {{variable}}",
        CreatedAt = <2025-11-07 09:11:02.8866667>,
        Id = {3e298f2b-c9e9-4df0-b579-dec01bf8ff4b},
        IsActive = True,
        IsDeleted = False,
        Key = "test-template",
        Name = "Test Template",
        Subject = "Test Subject",
        Type = NotificationType.Email {value: 0},
        UpdatedAt = <2025-11-07 09:11:02.8866667>
    }
}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.<>c__DisplayClass10_0.<BeEmpty>b__0(AssertionChain chain)
   at FluentAssertions.Execution.AssertionChain.WithExpectation(String message, Action`1 chain, Object[] args)
   at FluentAssertions.Execution.AssertionChain.WithExpectation(String message, Action`1 chain)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.BeEmpty(String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.GetAllTemplates_ReturnsEmptyList_WhenNoTemplates() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\TemplatesControllerIntegrationTests.cs:line 30
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.DeleteTemplate_WithExistingKey_ReturnsNoContent [28 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.NoContent {value: 204}, but found HttpStatusCode.NotFound {value: 404}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.TemplatesControllerIntegrationTests.DeleteTemplate_WithExistingKey_ReturnsNoContent() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\TemplatesControllerIntegrationTests.cs:line 167
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.GetUserPreferences_WithNonExistingUser_ReturnsNotFound [12 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.NotFound {value: 404}, but found HttpStatusCode.OK {value: 200}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.GetUserPreferences_WithNonExistingUser_ReturnsNotFound() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\UserPreferencesControllerIntegrationTests.cs:line 29
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.UpdateUserPreferences_WithNonExistingUser_ReturnsNotFound [12 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.NotFound {value: 404}, but found HttpStatusCode.NoContent {value: 204}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.UpdateUserPreferences_WithNonExistingUser_ReturnsNotFound() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\UserPreferencesControllerIntegrationTests.cs:line 162
--- End of stack trace from previous location ---
  Failed ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.CreateUserPreferences_WithValidData_ReturnsCreated [10 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.Created {value: 201}, but found HttpStatusCode.InternalServerError {value: 500}.
  Stack Trace:
     at FluentAssertions.Execution.LateBoundTestFramework.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.AddPreFormattedFailure(String formattedFailureMessage)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(Func`1 getFailureReason)
   at FluentAssertions.Execution.AssertionChain.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ShahdCooperative.NotificationService.IntegrationTests.Controllers.UserPreferencesControllerIntegrationTests.CreateUserPreferences_WithValidData_ReturnsCreated() in C:\Users\Predator\ShahdCooperativeProject\ShahdCooperative.NotificationService\ShahdCooperative.NotificationService.IntegrationTests\Controllers\UserPreferencesControllerIntegrationTests.cs:line 50
--- End of stack trace from previous location ---

Failed!  - Failed:    12, Passed:    19, Skipped:     0, Total:    31, Duration: 2 s - ShahdCooperative.NotificationService.IntegrationTests.dll (net9.0)
